### redis持久化rdb和aof的区别

#### rdb:

Snapshot快照，恢复时是将快照文件直接读到内存里。
Redis会单独创建（fork）一个子进程来进行持久化，会先将数据写入到一个临时文件中，待持久化过程都结束了，再用这个临时文件替换上次持久化好的文件。整个过程中，主进程是不进行任何IO操作的，这就确保了极高的性能。
优点：
1）节省磁盘空间
2）恢复速度快
缺点：
1）虽然Redis在fork时使用了写时拷贝技术，数据庞大时还是比较消耗性能
2）在备份周期在一定间隔时间做一次备份，所以如果Redis意外down调的话，就会丢失最后一次快照后的所有修改

#### aof:

以日志的形式来记录每个写操作，将Redis执行过的所有写指令记录下来（读操作不记录），只许追加文件但不可以改写文件
优点:
1）丢失数据概率更低
2）可读的日志文本，通过操作AOF文件，可以处理误操作
缺点:
1）比起RDB占用更多的磁盘空间
2）恢复备份速度要慢
3）每次读写都同步的话，有一定的性能压力

> [https://gitee.com/zssea/notes/blob/master/面试/尚硅谷Java面试_高频重点面试题 （第一季）](https://gitee.com/zssea/notes/blob/master/%E9%9D%A2%E8%AF%95/%E5%B0%9A%E7%A1%85%E8%B0%B7Java%E9%9D%A2%E8%AF%95_%E9%AB%98%E9%A2%91%E9%87%8D%E7%82%B9%E9%9D%A2%E8%AF%95%E9%A2%98%20%EF%BC%88%E7%AC%AC%E4%B8%80%E5%AD%A3%EF%BC%89.md#rdb)

